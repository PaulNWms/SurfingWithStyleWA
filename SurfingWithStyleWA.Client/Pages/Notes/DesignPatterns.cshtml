@page "/notes/designpatterns"

<h1>Design Patterns</h1>

<pre class="kaypro10">Links:
<a target="_blank" href="https://sourcemaking.com/design_patterns">Design patterns (and anti-patterns) site</a>

Abstract Factory
- Everyday usage: DbProviderFactory is an abstract base class for SqlClientFactory
- Everyday usage: SqlClientFactory.CreateCommand() creates instances of DbCommand
- A Factory represents a "family" of objects that it can create 
- Creational

Adapter
- Everyday usage: Entity Framework
- Resolves incompatible interfaces
- Structural

Bridge
- Everyday usage: .NET provider model, e.g. IFormatProvider
- Abstraction -> Abstraction -> Implementation
- Structural

Builder
- Example: Jimmy John's (order from a menu) vs. Subway (specify all the ingredients)
- Useful when you have a constructor with lots of parameters
- Has a Director base class, which defines the assembly steps
- Has 2 or more Concrete Builder child classes, which actually create objects
- Similar to Template Method, but for constructors
- Creational

Chain of Responsibility
- Everyday usage: exception handling
- Message handling
- Behavioral

Command
- Represent an action as an object
- Everyday usage: ICommand (in MVVM or just generally)
- ICommand may include additional methods like Validate(), Undo(), Compensate(), etc.
- Behavioral

Composite (Tree)
- Treats leaves and branches the same (nodes)
- Everyday usage: Email can send to individuals or groups
- Structural

Decorator (wrapper)
- Example: caching repository
- Attach additional responsibilities to an object (but use the same interface)
- Even sealed classes can be wrapped
- Structural

Façade
- Everyday usage: foreach
- Hides complexity
- Structural

Factory Method
- "Everyday" usage: IDbCommand.CreateParameter(), System.Windows.Forms.Control.CreateControlsInstance()
- A base class or interface defines the creation method
- Subclasses implement the creation method in different ways 
- Creational

Flyweight
- Instead of each instance containing all the data, shared objects are passed in
- Everyday usage: Graphics context in drawing, string interning
- Structural

Interpreter
- Behavioral

Inversion of Control (IoC)

Iterator
- Everyday usage: foreach and IEnumerable&lt;T&gt;
- MoveNext() and Current
- yield return
- Behavioral

Mediator
- Behavioral

Memento
- Behavioral

MVC

MVP

MVVM

Observer
- Everyday usage: Event Handlers
- Everyday usage: IObservable&lt;T&gt; and IObserver&lt;T&gt;
- Publish/Subscribe relationship
- Behavioral

Prototype
- Creational

Proxy
- Everyday usage: SOAP Service Proxies
- Placeholder / Stand-in for actual object
- Structural

Repository

Simple Factory
- Everyday usage: System.Threading.Tasks.TaskFactory.Run() creates instances of Task
- Decides which concrete type to return
- Creational

Singleton
- Example: return (instance == null) ? new MyClass() : instance;
- Everyday usage: static
- Breaks Single Responsibility Principle
- Difficult to test
- Anti-pattern, better to use IoC container
- Creational

State
- Behavioral

Strategy
- Everyday usage: delegate parameter in method call
- Everyday usage: delegate parameter in constructor
- Behavioral

Template Method
- Everyday usage: ASP.NET
- Base class defines the (sealed) template method, subclasses override steps
- Clients depend on base class
- Use when:
  - 2 or more classes follow the same workflow
  - The workflow is invariant
  - Some workflow steps may be encapsulated in the base class
- Behavioral

Visitor
- Implement interface IBlah { void Accept(IVisitor visitor); } in each of the classes (double dispatch)
- Implement interface IVisitor, which has a method for each type to be visited
- Puts all the logic for all of the classes in a single Visitor class
- Use when: looping over a collection of unrelated objects and performing an operation on each, without modifying them
- Behavioral
</pre>